<?xml version="1.0" encoding="utf-8" ?>
<!-- Copyright 2024 Ángel García de la Chica Herrera <angel.garcia@sygel.es>
     License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl). -->
<odoo>
    <template
        id="stock_picking_report_line_description_without_internal_ref_report_delivery_document"
        name="stock.picking.report.line.description.without.internal.ref.report.delivery.document"
        inherit_id="stock.report_delivery_document"
    >
        <xpath
            expr="//table[@name='stock_move_table']//span[@t-field='move.product_id']"
            position='attributes'
        >
            <attribute
                name="t-if"
            >not move.product_id.default_code or o.picking_type_id.code!='outgoing'</attribute>
        </xpath>
        <xpath
            expr="//table[@name='stock_move_table']//span[@t-field='move.product_id']"
            position='after'
        >
            <span
                t-if="move.product_id.default_code and o.picking_type_id.code=='outgoing'"
                t-out="move.product_id.display_name.replace('[{}]'.format(move.product_id.default_code), '')"
            />
        </xpath>
        <xpath
            expr="//table[@name='stock_backorder_table']//span[@t-field='bo_line.product_id']"
            position='attributes'
        >
            <attribute
                name="t-if"
            >not bo_line.product_id.default_code or o.picking_type_id.code!='outgoing'</attribute>
        </xpath>
        <xpath
            expr="//table[@name='stock_backorder_table']//span[@t-field='bo_line.product_id']"
            position='after'
        >
            <span
                t-if="bo_line.product_id.default_code and o.picking_type_id.code=='outgoing'"
                t-out="bo_line.product_id.display_name.replace('[{}]'.format(bo_line.product_id.default_code), '')"
            />
        </xpath>
    </template>
    <template
        id="stock_picking_report_line_description_without_internal_ref_stock_report_delivery_has_serial_move_line"
        name="stock.picking.report.line.description.without.internal.ref.stock.report.delivery.has.serial.move.line"
        inherit_id="stock.stock_report_delivery_has_serial_move_line"
    >
        <xpath expr="//span[@t-field='move_line.product_id']" position='attributes'>
            <attribute
                name="t-if"
            >not move_line.product_id.default_code or o.picking_type_id.code!='outgoing'</attribute>
        </xpath>
        <xpath expr="//span[@t-field='move_line.product_id']" position='after'>
            <span
                t-if="move_line.product_id.default_code and o.picking_type_id.code=='outgoing'"
                t-out="move_line.product_id.display_name.replace('[{}]'.format(move_line.product_id.default_code), '')"
            />
        </xpath>
    </template>

    <template
        id="stock_picking_report_line_description_without_internal_ref_stock_report_delivery_aggregated_move_lines"
        name="stock.picking.report.line.description.without.internal.ref.stock.report.delivery.aggregated.move.lines"
        inherit_id="stock.stock_report_delivery_aggregated_move_lines"
    >
        <xpath
            expr="//span[@t-esc=&quot;aggregated_lines[line]['name']&quot;]"
            position='attributes'
        >
            <attribute name="t-if">o.picking_type_id.code!='outgoing'</attribute>
        </xpath>
        <xpath
            expr="//span[@t-esc=&quot;aggregated_lines[line]['name']&quot;]"
            position='after'
        >
            <span
                t-if="o.picking_type_id.code=='outgoing'"
                t-out="aggregated_lines[line]['name'].replace('[{}]'.format(aggregated_lines[line]['product'].default_code), '')"
            />
        </xpath>
    </template>
</odoo>
